<!--index.wxml-->
<view class="container">
  <!--å›¾ä¹¦æ£€ç´¢-->
  <view class="main-card-item" id="chashu">
    <view class="card-item-hd">
      <text class="card-item-icon">ğŸ“–</text>
      <text class="card-item-name">å›¾ä¹¦æ£€ç´¢æŸ¥è¯¢</text>
    </view>
    <view class="weui-search-bar" style='background-color:#fff;border-top:0rpx;'>
      <view class="weui-search-bar__form">
        <view class="weui-search-bar__box">
          <icon class="weui-icon-search_in-box" type="search" size="14"></icon>
          <input type="text" class="weui-search-bar__input" placeholder="è¾“å…¥æ‚¨è¦æ£€ç´¢çš„å›¾ä¹¦å…³é”®å­—" value="{{inputVal}}" focus="{{inputShowed}}" bindconfirm="searchIt" bindfocus="onBindFocus" confirm-type='search' bindinput="inputTyping" />
        </view>
        <label class="weui-search-bar__label" hidden="{{inputShowed}}" bindtap="showInput">
          <icon class="weui-icon-search" type="search" size="14"></icon>
          <view class="weui-search-bar__text">å›¾ä¹¦é¦†å›¾ä¹¦æ£€ç´¢</view>
        </label>
      </view>
      <view class="weui-search-bar__cancel-btn" hidden="{{!inputShowed}}" bindtap="onBindBlur">å–æ¶ˆ</view>
    </view>
    <view class="card-item-bd">
      <view class="page-section page-section-gap radios">
        <view class='blockView'>
          <radio-group class="radio-group" bindchange="radioChange">
            <label class="radio" wx:for="{{radioItems}}" wx:key="radios">
              <radio value="{{item.value}}" checked="{{item.checked}}" />{{item.name}}
            </label>
          </radio-group>
        </view>
        <button class="mini-btn" type="primary" size="mini" bindtap='searchIt'>æŸ¥æ‰¾</button>
      </view>
    </view>
  </view>

  <!-- loading -->
  <view wx:if="{{isLoading == 'åŠ è½½ä¸­'}}" class="remind-box" style='margin-top:-200px;'>
    <image class="remind-img" src="/images/loading.gif"></image>
  </view>

  <!-- æœªç™»å½•æç¤º -->
  <view wx:elif="{{!isLogined}}" class="remind-box" style='margin-top:-260rpx;'>
    <image class="remind-img" src="/images/nothing.png"></image>
    <text class="remind-text">æ‚¨å’‹è¿˜æ²¡ç»‘å®šå­¦å·å‘¢ï¼Ÿ</text>
    <navigator url="/pages/index/index" class="remind-btn">ç»‘å®šç™»å½•</navigator>
  </view>

  <!--å¡ç‰‡åˆ—è¡¨-->
  <view wx:else class="main-card">
    <!-- å…¬å‘Šé€šçŸ¥æ  -->
    <view class='NoticeBar' wx:if='{{jsonStr.notice != "N/A"}}'>
      <wux-notice-bar loop>
        {{jsonStr.notice}}
      </wux-notice-bar>
    </view>

    <!-- æ•™åŠ¡å…³é—­ï¼Œæ— æ³•è®¿é—® -->
    <view class="main-card-item" id='jwClosed' wx:if="{{jsonStr.todayCourse.getCourseStatus == 500}}">
      <view class="card-item-hd">
        <text class="card-item-icon">âš </text>
        <text class="card-item-name">Error</text>ğŸ¤•
      </view>
      <view class="card-item-bd">
        <view class="book-intro raduis">
          <view class="remind-box">
            <image class="noDisplay" src="/images/holiday.png"></image>
            <text class="remind-text">æ•™åŠ¡ç½‘å…³äº†ï¼Œæœºæ™ºçš„å°ç›’å­å¸®æ‚¨ç¼“å­˜äº†è¯¾è¡¨åˆ°æ‰‹æœº</text>
          </view>
        </view>
      </view>
    </view>

    <!--Hi-->
    <view class="main-card-item" id="ykt" wx:if='{{jsonStr.teachWeek != "N/A"}}'>
      <navigator url='/pages/calendar/calendar'>
        <view class="card-item-hd">
          <view class="card-item-icon">
            <open-data type="userAvatarUrl"></open-data>
          </view>
          <text class="card-item-name">Hi! </text>
          <open-data type="userNickName"></open-data>ğŸ‰
        </view>
        <view class="card-item-bd">
          <view class="card-info-hd">
            <view class="card-info-left">
              <text class="ykt-title">ä»Šå¤©æ˜¯ï¼š</text>
            </view>
            <view class="card-info-right">
              <view>{{jsonStr.year}} å¹´ {{jsonStr.month}} æœˆ {{jsonStr.day}} æ—¥ {{jsonStr.dayOfWeek}}</view>
            </view>
          </view>
          <view class="ykt-balance">
            <text class="ykt-balance-text">ç¬¬ </text>
            <text class="ykt-balance-value">{{jsonStr.teachWeek}}</text>
            <text class="ykt-balance-text"> å‘¨</text>
          </view>
          <view class="ykt-cost" wx:if="{{jsonStr.todayCourse.getCourseStatus != 403 && jsonStr.todayCourse.todayCourseCount == 0}}">
            <text class="ykt-cost-value">ä»Šæ—¥ï¼šæ‚¨</text>
            <text class="ykt-cost-total">æ²¡æœ‰</text>
            <text class="ykt-cost-text">ä»»ä½•ä¸€èŠ‚è¯¾</text>
          </view>
          <view class="ykt-cost" wx:if="{{jsonStr.todayCourse.todayCourseCount > 0}}">
            <text class="ykt-cost-text">ä»Šæ—¥ï¼šæ‚¨å¯èƒ½ä¸€å…±æœ‰</text>
            <text class="ykt-cost-total">{{jsonStr.todayCourse.todayCourseCount}}</text>
            <text class="ykt-cost-text">èŠ‚è¯¾ğŸ‘‡</text>
          </view>
        </view>
      </navigator>
    </view>

    <!-- Hiï¼å¯’æš‘å‡ -->
    <view class="main-card-item" id='vocation' wx:else>
      <navigator url='/pages/calendar/calendar'>
        <view class="card-item-hd">
          <view class="card-item-icon">
            <open-data type="userAvatarUrl"></open-data>
          </view>
          <text class="card-item-name">Hi! </text>
          <open-data type="userNickName"></open-data>ğŸ‰
        </view>
        <view class="card-item-bd">
          <view class="book-intro raduis">
            <view class="remind-box">
              <image class="noDisplay" src="/images/holiday.png"></image>
              <text class="remind-text">å‡æœŸå°±è¦ç—›å¿«ç©å•ŠğŸƒâ€</text>
            </view>
          </view>
        </view>
      </navigator>
    </view>

    <!--è·å¼€å­¦å€’è®¡æ—¶ "-->
    <view class="main-card-item" id="kaixue" wx:if="{{jsonStr.gap2StartClass <= 30 && jsonStr.gap2StartClass >0}}">
      <navigator url='/pages/calendar/calendar'>
        <view class="card-item-hd">
          <text class="card-item-icon">ğŸ’€</text>
          <text class="card-item-name">è®²ä¸ªé¬¼æ•…äº‹</text>
        </view>
        <view class="card-item-bd">
          <view class="card-item-bd">
            <view class="jy-list">
              <view class="jy-item">
                <view class="jy-return-time">
                  <text class="jy-return-time-value">æ‚¨çš„ å‡æœŸä½™é¢</text>
                </view>
                <view class="jy-timing examWeek-Margin">
                  <text class="jy-timing-text">å·²ä¸è¶³</text>
                  <text class="ykt-balance-value" style='color:#000'>{{jsonStr.gap2StartClass}}</text>
                  <text class="jy-timing-text">å¤©</text>
                </view>
              </view>
            </view>
          </view>
        </view>
      </navigator>
    </view>

    <!--ä¸‹èŠ‚è¦ä¸Šçš„è¯¾-->
    <view class="main-card-item" id="nextCourse" wx:if='{{jsonStr.todayCourse.nextCourse !== null}}'>
      <view class="card-item-hd">
        <text>ğŸ“</text>
        <text class="card-item-name">ä¸‹èŠ‚è¯¾</text>
      </view>
      <view class="card-item-bd">
        <view class="kb-item">
          <view class="kb-item-left">
            <text class="kb-item-what">{{jsonStr.todayCourse.nextCourse.courseName}}</text>
            <text class="kb-item-when">{{jsonStr.todayCourse.nextCourse.startTime}}ä¸Šè¯¾ ~ {{jsonStr.todayCourse.nextCourse.endTime}}ä¸‹è¯¾</text>
          </view>
          <text class="kb-item-where">{{jsonStr.todayCourse.nextCourse.place}}</text>
        </view>
      </view>
      <view class="kb-open" bindtap='isShowAllCourse' wx:if="{{!isShowAllCourse}}">
        <text>å±•ç¤ºå…¨å¤©è¯¾è¡¨ğŸ‘‡</text>
      </view>
      <view class="kb-open" bindtap='isShowAllCourse' wx:else>
        <text>æœ•çŸ¥é“äº†ï¼Œèµ¶ç´§æ”¶èµ·æ¥å§ğŸ˜‚</text>
      </view>
    </view>
    <!--ä¸‹èŠ‚è¯¾æ²¡æœ‰è¯¾-->
    <view class="main-card-item" id="nextCourse" wx:elif="{{jsonStr.todayCourse.getCourseStatus != 403 && jsonStr.todayCourse.getCourseStatus != 500}}">
      <view class="card-item-hd">
        <text class="card-item-icon">ğŸ˜</text>
        <text class="card-item-name">ä¸‹ä¸€èŠ‚</text>
      </view>
      <view class="card-item-bd">
        <view class="book-intro raduis">
          <view class="remind-box">
            <image class="remind-img" src="/images/holiday.png"></image>
            <text class="remind-text">æ²¡æœ‰è¯¾å•¦ï¼Œä¼‘æ¯ä¸€ä¸‹å§ğŸ˜Š</text>
          </view>
        </view>
      </view>
      <view class="kb-open" bindtap='isShowAllCourse' wx:if="{{!isShowAllCourse}}">
        <text>å±•ç¤ºå…¨å¤©è¯¾è¡¨ğŸ‘‡</text>
      </view>
      <view class="kb-open" bindtap='isShowAllCourse' wx:else>
        <text>æœ•çŸ¥é“äº†ï¼Œèµ¶ç´§æ”¶èµ·æ¥å§ğŸ˜‚</text>
      </view>
    </view>

    <!-- ä»Šå¤©å…¨å¤©è¯¾ç¨‹ -->
    <view wx:if="{{isShowAllCourse}}">
      <!--ä»Šæ—¥å…¨å¤©æ²¡è¯¾?-->
      <view class="main-card-item" id='mk' wx:if='{{jsonStr.todayCourse.getCourseStatus == 204}}'>
        <view class="card-item-hd">
          <text class="card-item-icon">ğŸ˜</text>
          <text class="card-item-name">ä»Šæ—¥ï¼ˆ{{jsonStr['month']}}æœˆ{{jsonStr['day']}}æ—¥ {{jsonStr['dayOfWeek']}}ï¼‰</text>
        </view>
        <view class="card-item-bd">
          <view class="book-intro raduis">
            <view class="remind-box">
              <image class="noDisplay" src="/images/holiday.png"></image>
              <text class="remind-text">ä¸€æ•´å¤©éƒ½æ²¡è¯¾ï¼Œå‡ºå»å—¨å•ŠğŸƒâ€</text>
            </view>
          </view>
        </view>
      </view>
      <!--ä»Šæ—¥å…¨å¤©è¯¾è¡¨-->
      <view wx:else class="main-card-item" id="kb">
        <navigator url="/pages/classQuery/index?isShareFrom=null">
          <view class="card-item-hd">
            <text class="card-item-icon">ğŸ˜¡</text>
            <text class="card-item-name">ï¼ˆ{{jsonStr['month']}}æœˆ{{jsonStr['day']}}æ—¥ {{jsonStr['dayOfWeek']}}ï¼‰è¯¾è¡¨</text>
          </view>
          <view wx:if='{{jsonStr.todayCourse.getCourseStatus == 500}}' class="card-item-bd kb-nothing">
            <text>éƒ½è¯´äº†æ— æ³•è¿æ¥åˆ°æ•™åŠ¡ç½‘ğŸ¸</text>
          </view>
          <view wx:else class="card-item-bd">
            <view class="kb-item" wx:for="{{jsonStr['todayCourse']['allCourse']}}" wx:key="todayCourse">
              <view class="kb-item-left">
                <text class="kb-item-what">{{item.courseName}}</text>
                <text class="kb-item-when">{{item.startTime}}ä¸Šè¯¾ - {{item.endTime}}ä¸‹è¯¾</text>
              </view>
              <text class="kb-item-where">{{item.place}}</text>
            </view>
          </view>
          <view class="kb-open" wx:if='{{jsonStr.todayCourse.getCourseStatus != 500}}'>
            <text>æŸ¥çœ‹å®Œæ•´ä¸ªäººè¯¾è¡¨</text>
          </view>
        </navigator>
      </view>

    </view>

    <view class="main-card-item" id="kb" wx:if="{{jsonStr.todayCourse.getCourseStatus == 500}}">
      <navigator url="/pages/classQuery/index?isShareFrom=null">
        <view class="card-item-hd">
          <text class="card-item-icon">ğŸ˜¡</text>
          <text class="card-item-name">ç¼“å­˜ï¼ˆ {{jsonStr['dayOfWeek']}}ï¼‰è¯¾è¡¨</text>
        </view>
        <view class="card-item-bd">
          <view class="kb-item" wx:for="{{offlinePeronalClass}}" wx:key="todayCourseOffline" wx:if="{{item.courseName != ''}}">
            <view class="kb-item-left">
              <text class="kb-item-what">{{item.courseName}}{{item.teachWeek}}</text>
              <text class="kb-item-when">{{item.startTime}}ä¸Šè¯¾ - {{item.endTime}}ä¸‹è¯¾</text>
            </view>
            <text class="kb-item-where">{{item.place}}</text>
          </view>
        </view>
        <view class="kb-open">
          <text>æŸ¥çœ‹å®Œæ•´ä¸ªäººè¯¾è¡¨</text>
        </view>
      </navigator>
    </view>


    <!-- å¹¿å‘Š -->
    <view class="main-card-item" wx:if="{{!adsError}}">
      <view class="card-item-hd">
        <text class="card-item-icon">ğŸª</text>
        <text class="card-item-name">å¹¿å‘ŠèµåŠ©</text>
      </view>
      <view class="card-item-bd">
        <view class="book-intro raduis">
          <view class="remind-box">
            <!-- å¹¿å‘Šä½ -->
            <view style='width:100%;'>
              <ad unit-id="adunit-62f52651dd5f4ff6" binderror="adsError"></ad>
            </view>
            <!-- å¹¿å‘Šä½ç»“æŸ -->
          </view>
        </view>
      </view>
    </view>

    <!--èŠ‚å‡æ—¥ä¿¡æ¯-->
    <view class="main-card-item" id="fj" wx:for='{{jsonStr["nextHoliday"]}}' wx:key="jiejiari" wx:if="{{item.gapDays <= 15 && item.gapDays >= 0}}">
      <navigator url='/pages/calendar/calendar'>
        <view class="card-item-hd">
          <image class="card-item-icon" src="/images/holiday.png"></image>
          <text class="card-item-name">{{item.holidayName}}</text>
        </view>
        <view class="card-item-bd" wx:if="{{item.gapDays > 0}}">
          <view class="jy-list">
            <view class="jy-item">
              <view class="jy-return-time">
                <text class="jy-return-time-value">ä»Šå¤©è· {{item.holidayName}}</text>
              </view>
              <view class="jy-timing">
                <text class="jy-timing-text">è¿˜æœ‰</text>
                <text class="ykt-balance-value">{{item.gapDays}}</text>
                <text class="jy-timing-text">å¤©</text>
              </view>
            </view>
          </view>
        </view>
        <view class="card-item-bd" wx:if="{{item.gapDays == 0}}">
          <view class="jy-list">
            <view class="jy-item">
              <view class="jy-timing">
                <text class="jy-timing-text">ä»Šå¤©æ˜¯</text>
                <text class="ykt-balance-value">{{item.holidayName}}</text>
                <text class="jy-timing-text">å“Ÿ~</text>
              </view>
            </view>
          </view>
        </view>
      </navigator>
    </view>

    <!--è·è€ƒè¯•å‘¨å€’è®¡æ—¶ -->
    <view class="main-card-item" id="ks" wx:if="{{jsonStr.gap2ExamWeek <= 30 && jsonStr.gap2ExamWeek > 0}}">
      <navigator url='/pages/calendar/calendar'>
        <view class="card-item-hd">
          <text class="card-item-icon">ğŸ–Š</text>
          <text class="card-item-name">è€ƒè¯•</text>
        </view>
        <view class="card-item-bd">
          <view class="jy-list">
            <view class="jy-item">
              <view class="jy-return-time">
                <text class="jy-return-time-value">ä»Šå¤©è· é›†ä¸­è€ƒè¯•å‘¨ </text>
              </view>
              <view class="jy-timing examWeek-Margin">
                <text class="jy-timing-text">ä»…å‰©</text>
                <text class="ykt-balance-value">{{jsonStr.gap2ExamWeek}}</text>
                <text class="jy-timing-text">å¤©</text>
              </view>
            </view>
          </view>
        </view>
      </navigator>
    </view>

    <!--ç”µè´¹-->
    <view class="main-card-item" id="sdf" wx:if="{{jsonStr.eleInfo.Balance > 0 && jsonStr.eleInfo.status == 200 }}">
      <navigator url='/pages/electricity/electricityBind'>
        <view class="card-item-hd">
          <text>âš¡</text>
          <text class="card-item-name">å®¿èˆç”¨ç”µ</text>
        </view>
        <view class="card-item-bd">
          <view class="card-info-hd">
            <view class="card-info-left">
              <text class="card-info-name">{{jsonStr.eleInfo.zhai}}æ–‹{{jsonStr.eleInfo.room}}</text>
            </view>
            <view class="card-info-right">
              <view>æˆªè‡³æ—¶é—´ï¼š{{jsonStr.eleInfo.time}}</view>
            </view>
          </view>
          <view class="sdf-bd">
            <view class="sdf-key">
              <text class="sdf-text">å‰©ä½™ç”µé‡</text>
              <text class="sdf-value">{{jsonStr.eleInfo.Balance}}</text>
              <text class="sdf-text">åº¦</text>
            </view>
          </view>
        </view>
      </navigator>
    </view>
    <view class="main-card-item" style='height:400rpx;' wx:else>
      <navigator url='/pages/electricity/electricityBind'>
        <view class="card-item-hd">
          <text>âš¡</text>
          <text class="card-item-name">å®¿èˆç”¨ç”µ</text>
        </view>
        <view class="card-item-bd">
          <view class="remind-box">
            <image class="remind-img" src="/images/nothing.png"></image>
            <text class="remind-text">å»ºè®®æ‚¨ç»‘å®šä¸€ä¸‹å®¿èˆ</text>
            <navigator url='/pages/electricity/electricityBind' class="remind-btn">ç»‘å®šå®¿èˆ</navigator>
          </view>
        </view>
      </navigator>
    </view>

  </view>
</view>